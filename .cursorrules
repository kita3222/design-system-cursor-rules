# デザインシステム開発ルール

## プロジェクト記憶管理

以下のルールは、開発プロセスの一貫性を確保するための最重要事項です：

- **【必須】** 作業開始前に `.cursor/memory` ディレクトリの内容を必ず参照すること
- **【必須】** タスク完了後、実行内容を `.cursor/memory` に記録すること
- **【必須】** `.cursor/flow/designSystemFlow.md` に定義された開発フローに従うこと

### メモリファイルの役割と使い分け

- **progress.md**: デザインシステム構築の進捗状況を可視化するためのファイル
  - `.cursor/flow/designSystemFlow.md` に定義された各フェーズとステップの進捗状況を常に明確に反映すること
  - 各コンポーネントの実装状況、検証状況を詳細に記録すること
  - マイルストーンの達成状況や次の優先事項を明示すること
  - 作業履歴を時系列で記録し、プロジェクト全体の進行状況を把握できるようにすること

- **activeContext.md**: ユーザーが構築しようとしているデザインシステムの特性と要件を記録するためのファイル
  - ヒアリングによって得られたデザインシステムの目的、対象、ビジョンを詳細に記録すること
  - ブランドアイデンティティ、ユーザーコンテキスト、技術要件などの情報を体系的に蓄積すること
  - 決定されたデザイン要素（原則、カラーパレット、タイポグラフィなど）を保存すること
  - セッションが変わっても、ユーザーが目指すデザインシステムの全体像が把握できるようにすること

## コンポーネント実装ルール

- **【必須】** 各ページやビューの実装では、定義済みの汎用コンポーネントを必ず使用すること
- **【禁止】** ページごとに独自にハードコーディングしないこと
- **【必須】** 新しい要素が必要な場合は、まず汎用コンポーネントとして実装し、それを利用すること
- **【必須】** 汎用コンポーネントの変更は `.cursor/memory/activeContext.md` に記録すること
- **【必須】** すべての汎用コンポーネントは Storybook で文書化し、視覚的に検証すること

## Storybook による検証と構築

- **【必須】** 新規コンポーネント作成時は必ず Storybook のストーリーを作成すること
- **【必須】** コンポーネントの各バリエーションやステートを Storybook で確認できるようにすること
- **【必須】** コンポーネント実装前に Storybook でのプロトタイピングを行うこと
- **【必須】** ユーザーからのフィードバックを収集し、改善点を特定すること
- **【必須】** フィードバックに基づきコンポーネントを改善し、Storybookで再検証すること

## .cursorディレクトリ構成

```
.cursor/
├── memory/                # プロジェクトの記憶
│   ├── progress.md        # 進捗状況の記録（フェーズ/ステップの完了状況、コンポーネント実装状況）
│   └── activeContext.md   # 現在の開発コンテキスト（デザインシステムの特性、要件、決定事項）
└── flow/
    └── designSystemFlow.md # 開発フロー定義
```

## 進行方法

1. フローの各ステップに沿って顧客にヒアリングを行う
2. ヒアリング内容を `activeContext.md` に記録する（デザインシステムの特性と要件）
3. 進捗状況を `progress.md` に記録する（フェーズとステップの完了状況）
4. メモリに保存されたヒアリング内容を基にコンポーネントを設計する
5. Storybook でコンポーネントをプロトタイピング・検証する
6. ユーザーからのフィードバックを収集し、改善を行う
7. 最終的な実装内容は実際のHTML/CSSファイル（もしくはUIライブラリ）に反映する 

## メモリ更新ルール

- **【必須】** 各作業セッション開始時に、メモリファイルの内容を確認すること
- **【必須】** ヒアリング結果は即時に `activeContext.md` に反映すること
- **【必須】** コンポーネント実装の進捗は即時に `progress.md` に反映すること
- **【必須】** 重要な決定事項は `activeContext.md` の「デザインシステム検討事項と決定事項」セクションに記録すること
- **【必須】** 作業完了後、次のセッションで必要となる情報が両メモリファイルに適切に記録されていることを確認すること 